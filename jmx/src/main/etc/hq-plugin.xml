<?xml version="1.0"?>

<plugin name="jmx" package="com.jboss.jbossnetwork.product.jmx">


    <!-- appended to each template by MeasurementInfoXML -->
    <property name="template-config"
              value="server.type=%server.type%,server.url=%server.url%"/>

    <filter name="PooledInvoker"
            value="jboss:service=invoker,type=pooledha"/>

    <filter name="TxManager"
            value="jboss:service=TransactionManager"/>

    <filter name="JMSMessageCache"
            value="jboss.mq:service=MessageCache"/>

    <filter name="EJB"
            value="jboss.management.local:name=%ejb.name%,J2EEServer=Local,J2EEApplication=%j2ee.application%,EJBModule=%ejb.jar%"/>

    <filter name="EJBService"
            value="jboss.j2ee:jndiName=%ejb.name%,service=EJB"/>

    <filter name="EJBPool" value="${EJBService},plugin=pool"/>

    <filter name="EJBCache" value="${EJBService},plugin=cache"/>

    <!-- ObjectName properties used in the control plugins -->
    <property name="JMSQueue"
              value="jboss.mq.destination:service=Queue,name=%jms.destination%"/>

    <property name="JCAConnectionPool"
              value="jboss.jca:service=ManagedConnectionPool,name=%jca.connpool%"/>


    <filter name="GarbageCollector" value="java.lang:type=GarbageCollector,name=%collector.name%"/>

    <metrics name="JDK 5">

        <metric name="Availability"
                template="java.lang:type=OperatingSystem:__INSTANCE__"
                indicator="true"/>

        <metric name="Available Processors"
                alias="AvailableProcessors"
                template="java.lang:type=OperatingSystem:${alias}"
                defaultOn="true"/>
    </metrics>


    <help name="header">
        <![CDATA[

        ]]>
    </help>

    <help name="footer">
        <![CDATA[

        ]]>
    </help>


    <!--
        <server name="Java Process"
                description="A JMX Process"
                platforms="Unix,Win32">

            <config>
                <option name="server.name"
                    description="Server Name"/>

                <option name="server.type" description="Server Type"/>
                <option name="server.jndi.name" description="JNDI Name"/>
                <option name="server.initialcontextfactory" description="Initial Context Factory"/>
                <option name="server.url" description="Server URL"/>
                <option name="server.principle" description="Principle"/>
                <option name="server.credentials" description="Credentials"/>
            </config>

            <service name="test"/>


            <plugin type="autoinventory"
                    class="JMXServerDetector"/>

        </server>
    -->


    <server name="JDK 5"
            description="A JDK 5.0, JMX Remoting Process"
            platforms="Unix,Win32">

        <config>
            <option name="server.name"
                    description="Server Name"/>

            <option name="server.type" description="Server Type"
                    default="org.mc4j.ems.connection.support.metadata.J2SE5ConnectionTypeDescriptor"/>
            <option name="server.jndi.name" description="JNDI Name"/>
            <option name="server.initialcontextfactory" description="Initial Context Factory"/>
            <option name="server.url" description="Server URL"
                    default="service:jmx:rmi:///jndi/rmi://localhost:8999/jmxrmi"/>
            <option name="server.principle" description="Principle"/>
            <option name="server.credentials" description="Credentials"/>
        </config>


        <plugin type="control"
                class="JMXControlPlugin"/>

        <plugin type="measurement"
                class="JMXMeasurementPlugin"/>

        <plugin type="autoinventory"
                class="JMXServerDetector"/>

        <service name="Garbage Collector">
            <config>
                <option name="collector.name"
                        description="Collector Name"
                        default="sample"/>
            </config>
            <plugin type="autoinventory"/>
            <plugin type="measurement"
                    class="JMXMeasurementPlugin"/>
            <metric name="Availability"
                    template="${GarbageCollector}:__INSTANCE__"
                    indicator="true"/>
            <metric name="Collection Count"
                    alias="CollectionCount"
                    template="${GarbageCollector}:${alias}"
                    indicator="true"/>
            <metric name="Collection Time"
                    alias="CollectionTime"
                    template="${GarbageCollector}:${alias}"
                    indicator="true"/>


        </service>


    </server>

</plugin>
