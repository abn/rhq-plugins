<?xml version="1.0" encoding="UTF-8"?>

<plugin name="Samba"
        displayName="Samba"
        description="Support for RHEL Samba service"
        package="org.rhq.plugins.samba"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="urn:xmlns:rhq-plugin"
        xmlns:c="urn:xmlns:rhq-configuration">

   <depends plugin="Augeas"/>

   <server name="Samba Server"
            description="Configuration for Samba Server"
            discovery="SambaServerDiscoveryComponent"
            class="SambaServerComponent">

       <plugin-configuration>
           <c:simple-property name="augeasModuleName" displayName="Augeas Module Name" default="Samba" required="true" readOnly="true"
                              description="the name of the Augeas module/lens to use for loading and updating this resource's configuration"/>

           <c:simple-property name="configurationFilesInclusionPatterns" displayName="File Path" type="file" required="true" readOnly="true"
                              default="/etc/samba/smb.conf"
                              description="the absolute path of the samba configuration"/>

           <c:simple-property name="resourceConfigurationRootNode" required="true" readOnly="true"
                              default="/files/etc/samba/smb.conf/target[.='global']"/>
       </plugin-configuration>

      <resource-configuration>
        <c:group name="Basic Configurations">

            <c:simple-property name="workgroup" description="The workgroup your server will appear to be in when queried by clients" required="false"/>
            <c:simple-property name="server string" description="Value that will display in the printer comment box in print manager" required="false"/>

        </c:group>

          <c:group name="Security">
              <c:simple-property name="security" displayName="Authentication Mode" required="false" description="The type of authentication used by Samba">
                  <c:property-options>
                      <c:option value="domain"/>
                      <c:option value="server"/>
                      <c:option value="share"/>
                      <c:option value="user"/>
                  </c:property-options>
              </c:simple-property>

              <c:simple-property name="encrypt passwords" type="boolean" required="false" description="This option must be enabled if the clients are connecting from a Windows 98, Windows NT 4.0 with Service Pack 3, or other more recent versions of Microsoft Windows. The passwords are transfered between the server and the client in an encrypted format instead of in as a plain-text word that can be intercepted."/>

          </c:group>

          <c:group name="Printing">
              <c:simple-property name="load printers" required="false" displayName="Printing Enabled" type="boolean" description="Controls whether all printers in the printcap will be loaded for browsing by default"/>
              <c:simple-property name="cups options" required="false" description="Free form string of options passed to cups library"/>

          </c:group>
      </resource-configuration>

       <service name="Samba Share" description="a Samba share"
                discovery="SambaShareDiscoveryComponent" class="SambaShareComponent"
                createDeletePolicy="both">

           <plugin-configuration>
               <c:simple-property name="augeasModuleName" displayName="Augeas Module Name" default="Samba" required="true" readOnly="true"
                                  description="the name of the Augeas lens to use for loading and updating this resource's configuration"/>

               <c:simple-property name="configurationFilesInclusionPatterns" displayName="File Path" type="file" required="true" readOnly="true"
                                  default="/etc/samba/smb.conf"
                                  description="the absolute path of the samba configuration"/>

               <c:simple-property name="targetName" required="true" readOnly="true"/>
           </plugin-configuration>

           <resource-configuration>
               <c:simple-property name="name" required="true" readOnly="true" description="Name of share"/>
               <c:simple-property name="path" required="false" description="Directory to which the user of the service is to be given access"/>
               <c:simple-property name="comment" required="false" description="Comment string to associate with the new share"/>
               <c:simple-property name="browseable" type="boolean"  required="false" description="Controls whether this share is seen in the list of available shares"/>
               <c:simple-property name="read only" type="boolean"  required="false" description="Users of service may not create or modify files"/>
               <c:simple-property name="printable" type="boolean"  required="false" description="Clients may open, write to and submit spool files on the service directory "/>
               <c:simple-property name="write list" required="false" description="List of users that are given read-write access to the service"/>
               <c:simple-property name="guest ok" type="boolean"  required="false" description="No password is required to connect"/>
               <c:simple-property name="share modes" required="false" description="Enables or disables the honoring of the share modes during a file open"/>
               <c:simple-property name="valid users" required="false" description="List of users that should be allowed to login to this service"/>
           </resource-configuration>
       </service>
   </server>

</plugin>

