<?xml version="1.0"?>
<plugin name="Twitter"
        displayName="Twitter Plugin"
        package="org.rhq.plugins.twitter"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="urn:xmlns:rhq-plugin"
        description="Monitor various timelines on Twitter"
        xmlns:c="urn:xmlns:rhq-configuration">


    <server
            name="Twitter"
            discovery="TwitterDiscovery"
            class="TwitterComponent"
            singleton="true"
            description="Twitter monitoring subsystem"
        >

        <plugin-configuration>
            <c:simple-property name="user" required="false" description="Twitter user to post statuses"/>
            <c:simple-property name="password" required="false" description="Password of the user" type="password"/>
        </plugin-configuration>

        <operation name="postStatus"
                   description="Post a status message to the users timeline. Requires user and password to be set on the connection properties">
            <parameters>
                <c:simple-property name="message" required="true"/>
            </parameters>
            <results>
                <c:simple-property name="status" type="string"/>
            </results>
        </operation>

        <metric property="tweetCount" displayName="Tweet count" category="utilization" dataType="measurement"
                defaultOn="true" displayType="summary" measurementType="dynamic"
                description="Number of new tweets since last poll"/>

        <event name="TwitterEvent"/>


        <service
            name="TwitterFeed"
            discovery="FeedDiscovery"
            class="FeedComponent"
            supportsManualAdd="true"
            description="One timeline or search"
            createDeletePolicy="delete-only"
        >

            <plugin-configuration>
                <c:simple-property name="kind" default="user">
                    <c:property-options allowCustomValue="false">
                        <c:option value="user" name="User timeline" default="true"/>
                        <c:option value="search" name="Keyword search"/>
                    </c:property-options>
                </c:simple-property>
                <c:simple-property name="keyword" type="string" description="The user / keyword to search for"
                                   required="true"/>
            </plugin-configuration>

            <metric property="tweetCount" displayName="Tweet count" category="utilization" dataType="measurement"
                    defaultOn="true" displayType="summary" measurementType="dynamic"
                    description="Number of new tweets since last poll"/>

            <event name="FeedEvent"/>

        </service>

    </server>


</plugin>
